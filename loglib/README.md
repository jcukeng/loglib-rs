# loglib ‚Äî –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è

`loglib` ‚Äî —ç—Ç–æ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ–∞–π–ª –∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥ (syslog / Windows Event Log). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–æ—Ç–∞—Ü–∏—é –ø–æ —Ä–∞–∑–º–µ—Ä—É, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —É—Ä–æ–≤–Ω—é –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

---

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ **—Ñ–∞–π–ª** —Å **—Ä–æ—Ç–∞—Ü–∏–µ–π –ø–æ —Ä–∞–∑–º–µ—Ä—É**
- ‚úÖ –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ **—Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥ –û–°** (Linux: `syslog`, Windows: `Event Log`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Ä–æ–≤–Ω–µ–π: `TRACE`, `DEBUG`, `INFO`, `WARNING`, `ERROR`, `FATAL`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è **—Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `app.log` ‚Üí `app.log.1`)
- ‚úÖ –ü—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ ‚Äî –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞:  
  `[ROTATION] Logger restarted ‚Äî MyApp v1.0.0`
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é**: –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `WARNING`), –∏ –±–æ–ª–µ–µ —Å–ª–∞–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è
- ‚úÖ –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `stderr`: –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–µ—Ä—è–µ—Ç—Å—è

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

### 1. `Logger` ‚Äî —ç–∫–∑–µ–º–ø–ª—è—Ä –ª–æ–≥–≥–µ—Ä–∞

–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Logger`, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç:
- –ü–∏—Å–∞—Ç—å –≤ —Å–≤–æ–π —Ñ–∞–π–ª
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –ª–æ–≥–µ

```rust
let logger = Logger::file_and_system(
    "MyApp",           // –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ª–æ–≥–∞)
    "logs",            // –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
    "app.log",         // –∏–º—è —Ñ–∞–π–ª–∞
    1024 * 1024,       // –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1 –ú–ë
    3,                 // –º–∞–∫—Å–∏–º—É–º 3 —Ñ–∞–π–ª–∞ (–≤–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π)
)?;
```
### 2. 2. –ú–∞–∫—Ä–æ—Å—ã: debug!, warning!, error! –∏ –¥—Ä.
–≠—Ç–∏ –º–∞–∫—Ä–æ—Å—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä Logger –∏ –ø–∏—à—É—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª:
```rust
debug!(logger, "User {} logged in", user_id);
error!(logger, "Failed to connect to database: {}", error);
```
‚ö†Ô∏è –≠—Ç–∏ –º–∞–∫—Ä–æ—Å—ã –ø–∏—à—É—Ç —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª, –Ω–µ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥. 
### 3. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞–∫—Ä–æ—Å—ã: gdebug!, gwarning!, gerror! –∏ –¥—Ä.
–≠—Ç–∏ –º–∞–∫—Ä–æ—Å—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–¥–∞—á–∏ Logger ‚Äî –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑:
```rust
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–æ–¥–∏–Ω —Ä–∞–∑)
init_global_logger_file_and_system("MyApp", "logs", "app.log", 1e6 as u64, 3)?;

// –ì–¥–µ —É–≥–æ–¥–Ω–æ –≤ –∫–æ–¥–µ
gdebug!("Application started");
gerror!("Something went wrong");
```
### 4. platform_log ‚Äî –∑–∞–ø–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥ –û–° (–Ω–µ –≤ —Ñ–∞–π–ª), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```rust
let _ = logger.platform_log(LogLevel::Warning, "High memory usage detected");
```
### 6. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```rust
LogLevel::Trace,   // –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
LogLevel::Debug,   // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
LogLevel::Info,    // –û–±—ã—á–Ω—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
LogLevel::Warning, // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
LogLevel::Error,   // –û—à–∏–±–∫–∏
LogLevel::Fatal,   // –§–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ (–ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è)
```

### 7. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é
–ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å, –Ω–∏–∂–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è:
```rust
// –ì–ª–æ–±–∞–ª—å–Ω–æ
set_global_log_level(LogLevel::Warning);

// –ò–ª–∏ —á–µ—Ä–µ–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä
logger.set_log_level(LogLevel::Info);
```

### 8. –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
–ö–æ–≥–¥–∞ —Ñ–∞–π–ª –¥–æ—Å—Ç–∏–≥–∞–µ—Ç max_size_bytes ‚Äî –æ–Ω –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ app.log.1
–°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —Å–¥–≤–∏–≥–∞—é—Ç—Å—è: .1 ‚Üí .2, .2 ‚Üí .3
–•—Ä–∞–Ω–∏—Ç—Å—è –¥–æ max_files —Ñ–∞–π–ª–æ–≤
–ü—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞:

```log
[2025-04-05
14:30:22.123] DEBUG PID:12345 TID:{1} [ROTATION] Logger restarted ‚Äî MyApp v1.0.0
```
‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π max_size ‚Äî 256 –±–∞–π—Ç (—á—Ç–æ–±—ã –≤–º–µ—Å—Ç–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫). 
### üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è^
```rust
use loglib::{Logger, debug, warning, error, set_global_log_level};

fn main() {
    // 1. –°–æ–∑–¥–∞—ë–º –ª–æ–≥–≥–µ—Ä
    let logger = Logger::file_and_system(
        "example_app",
        "logs",
        "app.log",
        1024 * 1024,
        3,
    ).expect("Failed to create logger");

    // 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å
    set_global_log_level(loglib::LogLevel::Debug);

    // 3. –ü–∏—à–µ–º –≤ —Ñ–∞–π–ª
    debug!(logger, "Service started");
    warning!(logger, "Configuration uses default values");

    // 4. –ü–∏—à–µ–º –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥
    let _ = logger.platform_log(loglib::LogLevel::Info, "Startup completed");

    // 5. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞–∫—Ä–æ—Å—ã (–µ—Å–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä)
    // init_global_logger_file_only("logs", "global.log", 1e6 as u64, 3)?;
    // gdebug!("This goes to global logger");
}
```
–°–º. —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ loglib_examples
